Git学习

## 1.Git基础

### 1.1 版本管理

#### 1.1.1什么是版本管理

 ***Git是一个软件，它可以帮助我们进行文件的版本管理。***

*** 版本管理是一种记录文件变化的方式，以便将来查阅特定版本的文件内容。***

#### 1.1.2人为维护文档版本的问题

* 文档数量多且命名不清楚导致文档版本混乱
* 每次编辑文档需要复制，不方便
* 多人同时编辑同一个文档，容易产生覆盖

***



### 1.2 Git是什么

**Git是一个版本管理控制系统（缩写VCS），它可以在任何时间点，将文档的状态（其实文档的状态就是指文档的内容）作为更新记录保存起来，也可以在任何时间点，将更新记录恢复过来。**

![image-20220328161440529](C:\Users\28747\AppData\Roaming\Typora\typora-user-images\image-20220328161440529.png)

***



### 1.3 Git的基本工作流程

* 如果在命令行输入"git --version"会显示当前软件Git的版本

![image-20220328163757665](C:\Users\28747\AppData\Roaming\Typora\typora-user-images\image-20220328163757665.png)

![image-20220328164247693](C:\Users\28747\AppData\Roaming\Typora\typora-user-images\image-20220328164247693.png)

* 上述图片反应了Git工作的基本流程

***



### 1.4 Git的使用

#### 1.4.1Git使用前的配置

**在使用Git之前，需要告诉Git你是谁，在向Git仓库中提交时需要用到。**

* 配置提交人姓名：git config --global user.name 提交人的姓名
* 配置提交人邮箱：git config --global user.email 提交人邮箱
* 查看git配置信息：git config --list

**注意**

* 如果要对配置信息进行修改，重复上述命令即可。
* 配置只需要执行一次。
* 下图就是更改配置的操作。

![image-20220328173321906](C:\Users\28747\AppData\Roaming\Typora\typora-user-images\image-20220328173321906.png)

* 我们还可以通过更改配置文件来更改配置信息。配置信息的位置在**C/用户/28747/.gitconfig**下。

***



#### 1.4.2 提交步骤

* git init 初始化git仓库
* git status 查看文件状态
* git add 文件列表     追踪文件(其实就是将项目文件提交到暂存区)
* git commit -m 提交信息       向仓库中提交代码（将暂存区中的文件提交到仓库中）
* git log 查看提交记录

***



 ####  1.4.3 撤销

* 用暂存区中的文件覆盖工作目录中的文件： **git checkout** 文件     **而且用暂存区的文件覆盖工作目录的文件后，缓存区的原文件依然存在。**
* 将文件从缓存区删除：**git rm --cached**  文件
* 将git仓库中指定的更新记录恢复过来，并且覆盖暂存区和工作目录：**git rest --hard commit ID**

![image-20220330174301121](../../AppData/Roaming/Typora/typora-user-images/image-20220330174301121.png)

## 2.Git进阶

### 2.1 分支

* 为了便于理解，我们暂时可以认为分支就是工作目录中代码的一份副本，使用分支可以让我们从开发主任务上分离出来，以免影响开发主线。

![image-20220330180312552](../../AppData/Roaming/Typora/typora-user-images/image-20220330180312552.png)

#### 2.1.1分支细分

1.主分支(master)：第一次向git仓库中提交更新数据时自动产生的一个分支。

![image-20220330180635598](../../AppData/Roaming/Typora/typora-user-images/image-20220330180635598.png)

2. 开发分支（develop）：作为开发的分支，基于master分支创建。***开发分支我们可以理解为主分支的副本，功能在副本中开发，开发完成以后，再将副本中的代码拷贝到主分支中。***

3. 功能分支（feature）：作为开发分支具体功能的分支，基于开发分支创建。（开发一个独立的功能，当功能开发完成后，再将功能分支的代码合并到开发分支中，这时功能分支就可以删除了。当开发分支累计到一定程度时，再将开发分支中的代码合并到主分支。）

#### 2.1.2分支命令

   * git branch <u>查看分支</u>（***查看当前处于哪个分支中，以及总共有几个分支***）
   * git branch *分支名称*  <u>创建分支</u>
   * git checkout  分支名称 <u>切换分支</u>
   * git merge 来源分支 <u>合并分支</u>
   * git branch -d 分支名称 <u>删除分支</u>（**分支被合并后才允许删除**） （-D强制删除）

> **需要特别注意的是分支与分支之间应该是相互独立的，没有任何联系。所以在切换分支之前，当前分支上的工作一定要提交到Git仓库中，要保持当前分支上的工作区是完全干净的状态，否则就会出现问题。**
>
> **用合并分支命令时 （如将开发分支合并到主分支上）应先将分支调到主分支上，然后再在主分支上输入命令“ git merge develop"，这样开发分支就合并到主分支上了。应该注意的是虽然我们的开发分支已经合并到主分支上了，但是开发分支依旧存在，合并完开发分支后，我们仍然可以切换到开发分支上继续开发。也就是说合并分支其实是将开发分支上的文件提交到主分支上。**
>
> **需要注意的是如果你要删除的分支没有被合并过，一般情况下，这个分支是不允许删除的。而且我们不能从当前分支上删除当前分支，只能从别的分支上删除当前分支。**

### 2.2 暂时保存更改

在git中，可以暂时提取分支上的所有的改动并储存，让开发人员得到一个干净的工作副本，临时转向其他工作。

使用场景：**分支临时切换**

* 储存临时改动：<u>git stash</u>
* 恢复改动：<u>git stash pop</u>

**需要特别注意的是git提供的储存功能是独立于分支的，也就是说在其他分支上也可以执行恢复改动这个命令，如果在其他分支上执行这个命令，就会将改动恢复到其他分支上。**

***

## 3. Github

* 在版本控制系统中，大约90%的操作都是在本地仓库中进行的；暂存，提交，查看状态或者历史记录等等，除此之外，如果仅仅只有你一个人在这个项目里工作，你永远没有机会需要设置一个远程仓库。
* 只有当你需要和你的开发团队共享数据时，设置一个远程仓库才有意义。你可以把它想象成一个“文件管理服务器”，利用这个服务器可以与开发团队的其他成员进行数据交换。

### 3.1 多人协作开发流程

* A在自己的计算机中创建本地仓库
* A在github中创建远程仓库
* A将本地仓库推送到远程仓库上
* B克隆远程仓库到本地进行开发
* B将本地仓库中开发的内容推送到远程仓库
* A将远程仓库中的最新内容拉去到本地

![image-20220402135706599](../../AppData/Roaming/Typora/typora-user-images/image-20220402135706599.png)

![image-20220402135856093](../../AppData/Roaming/Typora/typora-user-images/image-20220402135856093.png)

### 3.2 Github远程仓库的创建以及如何将本地仓库上传到远程仓库（程序员A创建远程仓库并将本地仓库上传到远程仓库）



* 在Github上创建远程仓库时需要注意远程仓库的名字是不能和你账号中其他仓库的名称是一样的，它需要是唯一的。
* ![image-20220402144119155](../../AppData/Roaming/Typora/typora-user-images/image-20220402144119155.png)

远程仓库的网址如上图所示，“https://github.com"这个是Github的域名，”itcast-frontEnd"是用户名，“git-demo.git"是这个远程仓库的名称。

***



如何通过远程地址向这个远程仓库中提交内容呢？下面有三种方法。

1. ![image-20220402144703513](../../AppData/Roaming/Typora/typora-user-images/image-20220402144703513.png)

* 在命令行工具中创建一个空的仓库，然后推送到当前这个远程仓库来。

2.![image-20220402144916484](../../AppData/Roaming/Typora/typora-user-images/image-20220402144916484.png)

* 在命令行工具推送一个已经存在的仓库到这个远程仓库中来。

我们怎么做才能将本地仓库推送到这个远程仓库呢？

我们需要用到这个命令工具。

* git push <u>远程仓库地址</u> <u>分支名称</u>

* git push <u>远程仓库地址别名</u> <u>分支名称</u>

* git push -u <u>远程仓库地址别名</u> <u>分支名称</u>

  -u记住推送地址及分支，下次推送只需输入git push即可。

* git remote add <u>远程仓库地址别名</u> <u>远程仓库地址</u> （为远端仓库地址添加一个别名，方便以后的推送）

![image-20220402150033860](../../AppData/Roaming/Typora/typora-user-images/image-20220402150033860.png)

输入完上述命令后会弹出一个登录Github账号的界面，这是在向你获取推送权限。

![image-20220402150221190](../../AppData/Roaming/Typora/typora-user-images/image-20220402150221190.png)

登录完成之后就把本地仓库中你想要推送的分支推送到远程仓库的分支中了。

![image-20220402150528650](../../AppData/Roaming/Typora/typora-user-images/image-20220402150528650.png)

3.![image-20220402151909074](../../AppData/Roaming/Typora/typora-user-images/image-20220402151909074.png)

* 从其他的仓库中导入内容。

***

### 3.3 克隆仓库（程序员B克隆远程仓库并将更新好的本地仓库提交到远程仓库中）

克隆远端数据仓库到本地：<u>git</u> <u>clone</u> <u>仓库地址</u> 

* 克隆操作是不需要身份验证的，因为创建的远程仓库是开放的，任何人都能进行克隆。

![image-20220405164427472](../../AppData/Roaming/Typora/typora-user-images/image-20220405164427472.png)

***

![image-20220405164759453](../../AppData/Roaming/Typora/typora-user-images/image-20220405164759453.png)

* 上图是在B文件夹下边进行的操作。

**然后打开Git的命令行程序，我们发现当前的命令行程序停留在B文件夹下边，我们想在B目录下的git-demo文件下进行操作应该怎么做呢？**

![image-20220405165230252](../../AppData/Roaming/Typora/typora-user-images/image-20220405165230252.png)

**应该输入命令“cd git-demo",注意这个命令不是gIt命令，而是一个操作系统的的命令。”cd“是”change direction"的简写。**

***



![image-20220405165813441](../../AppData/Roaming/Typora/typora-user-images/image-20220405165813441.png)

**上图是程序员B将自己修改的文件提交的缓存区接着将缓存区的文件提交到本地仓库里边之后的内容**

***

**注意这个时候程序员B是没有任何权限将本地仓库的文件提交到公用的远程仓库里边，因此他需要获得权限，获得权限的操作如下图所示**

![image-20220405170452096](../../AppData/Roaming/Typora/typora-user-images/image-20220405170452096.png)

![image-20220405171034206](../../AppData/Roaming/Typora/typora-user-images/image-20220405171034206.png)

![image-20220405171116644](../../AppData/Roaming/Typora/typora-user-images/image-20220405171116644.png)

![image-20220405171651924](../../AppData/Roaming/Typora/typora-user-images/image-20220405171651924.png)

**首先我们需要点击设置，然后点击合作，之后输入密码登陆账号就可以添加合作人员来一起完成项目了。然后我们点击添加人员，我们只需输入程序员B的Github账号就可以了，接着点击"Add collaborator",然后进入下个界面，点击“Copy invite link",然后复制邀请链接，接着把这个邀请链接发个程序员B，程序员b需要在登陆了Github账号的基础上访问这个邀请链接，之后点解”Accept invitation"即可。**

***

### 3.4 拉取操作（程序员A将远程仓库中最新的版本拉取到自己的本地仓库里边）

**拉取远程仓库中的最新版本：** <u>git</u> <u>pull</u> <u>远程仓库地址</u> <u>分支名称</u>

![image-20220405172957691](../../AppData/Roaming/Typora/typora-user-images/image-20220405172957691.png)

**在这里讲一下“git clone"和”git pull“的区别：**

* ”git pull“命令只是拉取远程仓库中最新的版本，这个最新版本是和本地仓库的版本进行比较的，所以”git pull“命令的使用是在<u>已经有本地仓库的前提下使用的</u>；
* ”git clone“命令是完全克隆远程仓库 ，<u>是在没有本地仓库的基础上进行的</u>，“git clone”命令只需要在第一次加入项目开放中用到，在克隆完成后就不太会使用这个命令了，在后续操作中如果需要拉去远程仓库的最新版本，只需要使用“git pull”命令就可以了。

**需要注意如果远程仓库的版本高于本地仓库的版本，此时这个本地仓库是不能向远程仓库提交的，本地仓库必须拉取远程仓库的地址到本地，进行操作后再将本地仓库的内容提交到远程仓库。**

### 3.5 解决冲突

**在多人同时开发一个项目时，如果两个人修改了同一个文件的同一个地方，就会发生冲突，这个冲突需要人为解决。**

### 3.6 跨团队协作

* 程序员C fork仓库
* 程序员C 将仓库克隆在本地仓库进行修改
* 程序员C 将仓库推送到远程仓库
* 程序员C 发起pull reqest（即拉取请求）
* 原仓库作者审核
* 远程库作者合并代码

### 3.7 ssh免登录

Https协议仓库地址：https://github.com/2874725741/git-demo.git

**我们通常对远程仓库的操作采用的都是https协议的仓库地址，这种协议要实现协议认证，用户必须要提供用户名和密码，在正常情况下，每一次向远程仓库中提交内容都需要进行身份验证，这样未免有些麻烦。**

**在Github中为我们提供了另一种通讯协议即ssh协议，在实现身份验证时，是不需要提供用户名和密码的，可以实现免登录操作。**

**在ssh协议中，身份验证通过密钥来实现。密钥是成对出现的，分为公钥和私钥。这里的公钥就相当于门锁，私钥就相当于钥匙。公钥和私钥需要开发者通过命令来生成。公钥要将它放入Github的账户中，私钥放在开发者的本地仓库中，当开发者通过ssh协议向远程仓库推送内容时，公钥和私钥会进行配对，如果配对成功，内容就会推送成功。**

![image-20220407091403755](../../AppData/Roaming/Typora/typora-user-images/image-20220407091403755.png)

![image-20220407092028586](../../AppData/Roaming/Typora/typora-user-images/image-20220407092028586.png)

![image-20220407092225651](../../AppData/Roaming/Typora/typora-user-images/image-20220407092225651.png)

* 上面两个文件是生成的公钥和私钥，其中公钥需要放在GIthub的账号中，私钥就放在电脑的C盘的user文件夹下边。

### 3.8 Git忽略清单

将不需要被git管理的文件名字添加到此文件中，在执行git命令的时候，git就会忽略这些文件。

**在实际开发中，一次要提交的文件可能会很多，为了方便，我们会使用命令将所有文件都添加到暂存区中，这个时候不想被管理的文件也被添加到暂存区了，所以我们要用git命令来告诉git哪些文件不需要被管理。**

* git忽略清单文件名称： .git
* 将工作目录的文件全部添加到暂存区中：<u> git add .</u>

创建git忽略清单文件，并将不需要被管理的文件名字添加到此文件

![image-20220409162652642](../../AppData/Roaming/Typora/typora-user-images/image-20220409162652642.png)

将工作目录下全部文件添加到暂存区中的git命令

![image-20220409163013697](../../AppData/Roaming/Typora/typora-user-images/image-20220409163013697.png)

### 3.9 为仓库添加详细的说明

为远程仓库添加一个详细说明的步骤

* 在工作目录文件夹下创建一个readme.md 文件，文件里边写好本仓库的详细说明。
* 然后使用git命令将其添加到暂存区，并提交到本地仓库中，然后将本地仓库的更改提交到远程仓库中即可。
